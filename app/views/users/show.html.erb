<div class="container p-5">
  <h4>ユーザー詳細ページ</h4>
  <div class="row p-5">
    <div class="col">
      <%= attachment_image_tag @user, :image, size: "200x200", format: 'jpeg', fallback: "no_image.jpg" %>
      <p>一言コメント</p>
      <%= @user.comment %>
      <% if @user == current_user %>
      <%= link_to "編集する", edit_user_path(@user),class:"btn btn-outline-secondary" %>
      <% end %>
    </div>
    <div class="col">
      <table class="table table-striped">
        <tbody>
          <tr>
            <th scope="row">ユーザー名</th>
            <td><%= @user.name %></td>
          </tr>
          <tr>
            <th scope="row">ユーザーレベル</th>
            <td><%= @user.level %></td>
          </tr>
          <tr>
            <th scope="row">総獲得経験値</th>
            <td><%= @user.exp %></td>
          </tr>
          <tr>
            <th scope="row">投稿数</th>
            <td><%= @user.posts.count %></td>
          </tr>
          <tr>
            <th scope="row">フォロー数</th>
            <td><%= link_to @user.followings.count, user_followings_path(@user) %></td>
          </tr>
          <tr>
            <th scope="row">フォロワー数</th>
            <td><%= link_to @user.followers.count, user_followers_path(@user) %></td>
          </tr>
          <tr>
            <th scope="row">登録状態</th>
            <% if @user.is_active == true %>
            <td>アクティブユーザー</td>
            <% else %>
            <td>退会済みユーザー</td>
            <% end %>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
  <div class="row p-5">
    <div class="col">
      <h4>投稿一覧</h4>
      <table class="table table-borderless">
        <thead>
          <tr>
            <th scope="col-3">タイトル</th>
            <th scope="col-3">ジャンル</th>
            <th scope="col-3">投稿日</th>
            <th scope="col-3">いいね</th>
            <th scope="col-3">コメント</th>
          </tr>
        </thead>
        <tbody>
          <% @user.posts.each do |post| %>
          <tr>
            <td><%= link_to post.title, post_path(post) %></td>
            <td><%= post.genre.name %></td>
            <td><%= post.created_at.strftime('%Y/%m/%d') %></td>
            <td><%= post.goods.count %><i class="fas fa-heart pl-2"></i></td>
            <td><%= post.comments.count %>件</td>
          </tr>
          <% end %>
        </tbody>
      </table>
    </div>
  </div>
</div>